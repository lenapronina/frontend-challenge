{"version":3,"sources":["utils/constants.js","utils/CatsApi.js","components/NavItem/NavItem.js","components/Nav/Nav.js","components/Header/Header.js","components/LikeButton/LikeButton.js","components/Card/Card.js","components/MoreCatsLoading/MoreCatsLoading.js","components/CardsList/CardsList.js","components/AllCats/AllCats.js","images/cat-back.svg","components/NotFound/NotFound.js","components/LikedCats/LikedCats.js","components/App/App.js","utils/customHooks.js","reportWebVitals.js","index.js"],"names":["CATS_API_HEADERS","catsApi","baseUrl","headers","this","_baseURL","_headers","pageCounter","fetch","then","res","status","json","Promise","reject","data","NavItem","activeState","itemText","handleClick","isActive","className","onClick","Nav","path","handleAllCatsClick","handleLikedCatsClick","useState","activeAllCatsButton","setActiveAllCatsButton","activeLikedCatsButton","setActiveLikedCatsButton","isButtonActive","useCallback","useEffect","Header","LikeButton","handleLike","isLiked","isDisabled","isLikedClassName","disabled","Card","cardItem","handleDislike","savedCards","setIsLiked","checkLike","likedItem","some","item","id","style","backgroundImage","url","MoreCatsLoading","CardsList","React","forwardRef","ref","allCards","images","map","index","fetching","AllCats","allImages","NotFound","header","description","src","CatImage","alt","LikedCats","catData","length","App","history","useHistory","setPath","savedCats","setSavedCats","setIsDisabled","db","Dexie","version","stores","cats","open","catch","err","console","log","dispatch","checkStorage","toArray","initialCats","handleSaveCat","cat","newCat","catId","add","newCats","handleRemoveCat","delete","filter","card","useReducer","state","action","type","page","pager","pagerDispatch","concat","allImagesDispatch","bottomBoundaryRef","useRef","getCats","e","scrollRef","scrollObserver","node","IntersectionObserver","entries","forEach","en","intersectionRatio","observe","current","useInfiniteScroll","location","pathname","push","exact","from","to","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","basename","document","getElementById"],"mappings":"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","file":"static/js/main.f57c19c2.chunk.js","sourcesContent":["const CATS_API_BASEURL = \"https://api.thecatapi.com/v1/images/search\";\n\nconst SUPER_DOPER_SECRET_API_KEY='49b003a3-d34e-47fb-8da4-23f7bc9ea11e';\n\nconst CATS_API_LIMIT = 15;\n\nconst CATS_API_HEADERS = {\n  'Accept': 'application/json',\n  'Content-Type': 'application/json',\n  'x-api-key': SUPER_DOPER_SECRET_API_KEY\n};\n\nexport { \n  CATS_API_BASEURL,\n  CATS_API_HEADERS,\n  CATS_API_LIMIT\n};","import { CATS_API_BASEURL, CATS_API_HEADERS, CATS_API_LIMIT } from './constants';\n\nclass CatsApi {\n  constructor({baseUrl, headers}){\n    this._baseURL = baseUrl;\n    this._headers = headers;\n  }\n\n  getCats(pageCounter) {\n    return fetch(`${this._baseURL}?limit=${CATS_API_LIMIT}&page=${pageCounter}`, {\n      headers: this._headers\n    })\n    .then((res) => {\n      if(res.status === 200){\n        return res.json();\n      } else {\n        return Promise.reject('При получении данных произошла ошибка');\n      }\n    })\n    .then(data => data);\n  }\n}\n\nconst catsApi = new CatsApi({\n  baseUrl: CATS_API_BASEURL,\n  headers: CATS_API_HEADERS\n});\n\nexport {catsApi};","import React from 'react';\nimport './NavItem.css';\n\nfunction NavItem({\n  activeState,\n  itemText,\n  handleClick\n}){\n\n  const isActive = activeState ? 'nav__item_active' : '';\n\n  return(\n    <button\n      className={`nav__item ${isActive}`}\n      onClick={handleClick}\n    >{itemText}</button>\n  )\n}\n\nexport default NavItem;","import React,  { useState, useEffect, useCallback } from 'react';\nimport './Nav.css';\n\nimport NavItem from '../NavItem/NavItem';\n\nfunction Nav({\n  path,\n  handleAllCatsClick,\n  handleLikedCatsClick,\n}){\n\n  // states for navitems\n  const [activeAllCatsButton, setActiveAllCatsButton] = useState(false);\n  const [activeLikedCatsButton, setActiveLikedCatsButton] = useState(false);\n\n  // manage navitem active state with router path\n  const isButtonActive = useCallback(() => {\n    if(path ==='/all-cats'){\n      setActiveAllCatsButton(true);\n      setActiveLikedCatsButton(false);\n    }\n\n    if(path ==='/liked-cats'){\n      setActiveLikedCatsButton(true);\n      setActiveAllCatsButton(false);\n    }\n\n    if(path ==='/not-found'){\n      setActiveLikedCatsButton(false);\n      setActiveAllCatsButton(false);\n    }\n  },[path]);\n\n  // useEffect that checks every changing in isButtonActive callback\n  useEffect(()=>{\n    isButtonActive();\n  }, [isButtonActive]);\n\n  return(\n    <nav className=\"nav\">\n      <NavItem\n        activeState={activeAllCatsButton}\n        handleClick={handleAllCatsClick} \n        itemText=\"Все котики\"\n      />\n      <NavItem\n        activeState={activeLikedCatsButton}\n        handleClick={handleLikedCatsClick} \n        itemText=\"Любимые котики\"\n      />\n    </nav>\n  )\n}\n\nexport default Nav;","import React from 'react';\nimport './Header.css';\nimport Nav from '../Nav/Nav'\n\nfunction Header({\n  path,\n  handleAllCatsClick, \n  handleLikedCatsClick,\n}){\n  return(\n    <header className=\"header\">\n      <Nav\n        path={path} \n        handleAllCatsClick={handleAllCatsClick}\n        handleLikedCatsClick={handleLikedCatsClick}\n      />\n    </header>\n  )\n}\n\nexport default Header;","import React from 'react';\nimport './LikeButton.css';\n\nfunction LikeButton ({\n  handleLike,\n  isLiked,\n  isDisabled\n}) {\n\n  const isLikedClassName = isLiked ? 'like-button_active' : '';\n\n  return(\n    <button \n      className={`like-button ${isLikedClassName}`}\n      onClick={handleLike}\n      disabled={isDisabled ? true : false}\n    ></button>\n  )\n}\n\nexport default LikeButton;","import React, { useState, useCallback, useEffect } from 'react';\nimport './Card.css';\n\nimport LikeButton from '../LikeButton/LikeButton';\n\nfunction Card({\n  cardItem,\n  handleLike,\n  handleDislike,\n  savedCards,\n  path,\n  isDisabled\n}){\n\n  // state for managing likeButton (style);\n  const [isLiked, setIsLiked] = useState(false);\n\n  const likeCat = () => {\n    handleLike(cardItem);\n  }\n\n  const dislikeCat = () => {\n    handleDislike(cardItem);\n  }\n\n  // check that cat has saved\n  const checkLike = useCallback(() => {\n   \n    const likedItem = savedCards.some((item) => item.id === cardItem.id);\n\n    // toggle isLiked state\n    if(likedItem){\n      setIsLiked(true);\n    } else {\n      setIsLiked(false);\n    }\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [])\n  \n  const toggleLike = () =>{\n    checkLike()\n    if(isLiked){\n      setIsLiked(false);\n      dislikeCat();\n    } else {\n      setIsLiked(true);\n      likeCat();\n    }\n  }\n  \n    useEffect(()=> {\n      checkLike();\n    }, [checkLike, path]);\n  \n  return(\n    <li className=\"card\" style={{ backgroundImage:`url(${cardItem.url})` }}>\n      <LikeButton\n        isDisabled={isDisabled}\n        handleLike={toggleLike}\n        isLiked={isLiked}\n      />\n    </li>\n  )\n}\n\nexport default Card;","import React from 'react';\nimport './MoreCatsLoading.css';\n\nfunction MoreCatsLoading(){\n  return(\n    <p className=\"more-cats-loading\">... загружаем еще котиков ...</p>\n  )\n}\n\nexport default MoreCatsLoading;\n","import React from 'react';\nimport './CardsList.css';\n\nimport Card from '../Card/Card';\nimport MoreCatsLoading from '../MoreCatsLoading/MoreCatsLoading';\n\nconst CardsList = React.forwardRef((\n{\n  allCards,\n  handleLike,\n  handleDislike,\n  savedCards,\n  path,\n  isDisabled\n}, ref) => {\n\n  return (\n    <>\n    <ul className=\"card-list\">{\n      allCards.images.map((cardItem, index) => (\n        <Card\n          isDisabled={isDisabled}\n          path={path} \n          key={index}\n          cardItem={cardItem}\n          handleLike={handleLike}\n          handleDislike={handleDislike}\n          savedCards={savedCards}\n        />\n      ))\n      }\n    </ul>\n    { allCards.fetching && (<MoreCatsLoading />)}\n    <div\n      className='card-list__bottom-boundary'\n      ref={ref} \n    />\n    </>\n  )\n} );\n\nexport default CardsList;\n\n","import React from 'react';\nimport './AllCats.css';\n\nimport CardsList from '../CardsList/CardsList';\n\nconst AllCats = React.forwardRef((\n{ allImages,\n  handleLike,\n  handleDislike,\n  savedCards,\n  path,\n  isDisabled\n}, ref ) => {\n  \n  return(\n    <CardsList\n      path={path}\n      handleLike={handleLike}\n      handleDislike={handleDislike} \n      allCards={allImages}\n      ref={ref}\n      savedCards={savedCards}\n      isDisabled={isDisabled}\n    />\n  )\n})\n\nexport default AllCats;","export default __webpack_public_path__ + \"static/media/cat-back.993e5cf9.svg\";","import React from 'react';\nimport './NotFound.css';\nimport CatImage from '../../images/cat-back.svg';\n\nfunction NotFound({ header, description }){\n  return(\n    <div className=\"notfound\">\n      <h2 className=\"notfound__heading\">{header}</h2>\n      <p className=\"notfound__paragraph\">{description}</p>\n      <img \n        className=\"notfound__image\"\n        src={CatImage} \n        alt=\"котик\"\n      />\n    </div>\n  )\n}\n\nexport default NotFound;","import React from 'react';\nimport Card from '../Card/Card';\n\nimport NotFound from '../NotFound/NotFound';\n\nfunction LikedCats ({\n  path,\n  catData,\n  handleLike,\n  handleDislike,\n  savedCards,\n  isDisabled\n}){\n\n  // check if there are no liked cats\n  const hasSavedCats = catData.length > 0 ? true : false;\n\n  return( \n    hasSavedCats ? ( \n      <ul className=\"card-list card-list__liked\">\n        { catData.map((item, index) => (\n          <Card\n            isDisabled={isDisabled}\n            path={path} \n            key={index}\n            cardItem={item}\n            handleLike={handleLike}\n            handleDislike={handleDislike}\n            savedCards={savedCards}\n          />\n        ))}\n      </ul>\n    ) : ( \n      <NotFound \n        header=\"мяу\"\n        description=\"здесь пока нет котиков\"\n      />)\n  )\n}\n\nexport default LikedCats;","import React, { useState, useEffect, useReducer, useRef, useCallback } from 'react';\nimport { Route, Redirect, Switch, useHistory } from 'react-router-dom';\nimport Dexie from 'dexie';\nimport './App.css';\n\nimport { useFetch, useInfiniteScroll } from '../../utils/customHooks';\n\nimport Header from '../Header/Header';\nimport AllCats from '../AllCats/AllCats';\nimport LikedCats from '../LikedCats/LikedCats';\nimport NotFound from '../NotFound/NotFound';\n\nfunction App() {\n\n  // history hook for moving between pages\n  const history = useHistory();\n  const [path, setPath] = useState('/');\n  \n  // state for liked cats\n  const [savedCats, setSavedCats] = useState([]);\n\n  // state for disabling button\n  const [isDisabled, setIsDisabled] = useState(false);\n\n  // create dexie db instance\n  const db = new Dexie(\"savedCatsDB\");\n  \n  // create cats table to store data\n  db.version(1).stores({\n    // define table params \n    cats: \"++id, catId, url\" \n  })\n\n  // catch error if db wouldnt open\n  db.open().catch((err)=> {\n    console.log(err)\n  });\n\n  // func to get saved cats from db\n  const checkStorage = useCallback(()=> {\n    db.cats.toArray()\n    .then((initialCats) => {\n      setSavedCats(initialCats)\n    })\n    .catch((err)=> {\n      console.log(err);\n    });\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  const handleSaveCat = (cat) => {\n\n    setIsDisabled(true);\n\n    // new cat object\n    const newCat = {\n      id: cat.id,\n      catId: cat.id,\n      url: cat.url\n    }\n\n    db.cats.add(newCat)\n    .then(() => {\n      const newCats = [newCat, ...savedCats];\n      // update state with new object\n      setSavedCats(newCats);\n      setIsDisabled(false);\n    })\n    .catch((err)=> {\n      console.log(err);\n      setIsDisabled(false);\n    });\n  }\n\n  const handleRemoveCat = (cat) => {\n\n    setIsDisabled(true);\n\n    db.cats.delete(cat.id)\n    .then(() => {\n      const newCats = savedCats.filter((card) => card.id !== cat.id);\n      setSavedCats(newCats);\n      setIsDisabled(false);\n    })\n    .catch((err)=> {\n      console.log(err);\n      setIsDisabled(false);\n    });\n  }\n\n  const handleAllCatsClick = () => {\n    history.push('/all-cats');\n    setPath('/all-cats');\n  }\n\n  const handleLikedCatsClick = () => {\n    history.push('/liked-cats');\n    setPath('/liked-cats');\n  }\n\n  const imgReducer = (state, action) => {\n    switch (action.type) {\n      case 'STACK_IMAGES':\n        return { ...state, images: state.images.concat(action.images) }\n      case 'FETCHING_IMAGES':\n        return { ...state, fetching: action.fetching }\n      default:\n        return state;\n    }\n  } \n  const pageReducer = (state, action) => {\n    switch (action.type) {\n      case 'NEXT_PAGE':\n        return { ...state, page: state.page + 1 }\n      default:\n        return state;\n    }\n  }\n  \n  // reducers for infinite scroll\n  const [pager, pagerDispatch] = useReducer(pageReducer, { page: 0 }); \n  const [allImages, allImagesDispatch] = useReducer(imgReducer,{ images:[], fetching: true });\n  // ref hook to check scroll bottom\n  const bottomBoundaryRef = useRef(null);\n\n  useFetch(pager, allImagesDispatch);\n  useInfiniteScroll(bottomBoundaryRef, pagerDispatch, path);\n  \n  // check storage to load saved cats\n  useEffect(() => {\n    checkStorage();\n  }, [checkStorage]);\n\n  \n  useEffect(() => {\n    setPath(history.location.pathname);\n  },[history, path]) \n\n  return (\n    <div className=\"app\">\n      <Header \n        path={path} \n        handleAllCatsClick={handleAllCatsClick}\n        handleLikedCatsClick={handleLikedCatsClick}\n      />\n      <Switch>\n        <Redirect exact from=\"/\" to=\"/all-cats\" />\n        <Route path=\"/all-cats\">\n          <AllCats\n            path={path} \n            allImages={allImages}\n            ref={bottomBoundaryRef}\n            handleLike={handleSaveCat}\n            handleDislike={handleRemoveCat}\n            savedCards={savedCats}\n            isDisabled={isDisabled}\n          />\n        </Route>\n        <Route path=\"/liked-cats\">\n          <LikedCats\n            path={path} \n            handleLike={handleSaveCat}\n            handleDislike={handleRemoveCat}\n            savedCards={savedCats}\n            catData={savedCats}\n            isDisabled={isDisabled}\n          />\n        </Route>\n        <Route path=\"/not-found\">\n          <NotFound \n            header=\"404\"\n            description=\"страница не найдена, плак\"\n          />\n        </Route>\n        <Redirect from=\"*\" to=\"/not-found\" />\n      </Switch>\n    </div>\n  );\n}\n\nexport default App;\n","import { useEffect, useCallback } from 'react';\nimport { catsApi } from './CatsApi';\n\nexport const useFetch = (data, dispatch) => {\n  useEffect(() => {\n    dispatch({ type: 'FETCHING_IMAGES', fetching: true });\n    catsApi.getCats(data.page)\n      .then(images => {\n        dispatch({ type: 'STACK_IMAGES', images });\n        dispatch({ type: 'FETCHING_IMAGES', fetching: false });\n      })\n      .catch(e => {\n        dispatch({ type: 'FETCHING_IMAGES', fetching: false });\n        return e;\n      })\n  }, [dispatch, data.page])\n}\n\nexport const useInfiniteScroll = (scrollRef, dispatch, path) => {\n  const scrollObserver = useCallback(\n    node => {\n      new IntersectionObserver(entries => {\n        entries.forEach(en => {\n          if (en.intersectionRatio > 0) {\n            dispatch({ type: 'NEXT_PAGE' });\n          }\n        });\n      }).observe(node);\n    },\n    [dispatch]\n  );\n  useEffect(() => {\n    if (scrollRef.current) {\n      scrollObserver(scrollRef.current);\n    }\n  }, [scrollObserver, scrollRef, path]);\n}","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { HashRouter } from 'react-router-dom';\nimport App from './components/App/App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <HashRouter basename='/'>\n      <App />\n    </HashRouter>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\nreportWebVitals();\n"],"sourceRoot":""}